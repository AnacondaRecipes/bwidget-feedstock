{% set name = "BWidget" %}
{% set version = "1.10.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://downloads.sourceforge.net/project/tcllib/{{ name }}/{{ version }}/{{ name|lower }}-{{ version }}.tar.gz
  sha256: 4aea02f38cf92fa4aa44732d4ed98648df839e6537d6f0417c3fe18e1a34f880
  # use a separate folder to avoid moving scripts generated by conda-build
  folder: src

build:
  number: 0

requirements:
  host:
    - tk {{ tk }}
  run:
    - tk

test:
  commands:
    - echo "if {[catch {package require -exact BWidget {{ version }}; exit 0}]} {exit 1}" | xvfb-run tclsh  # [linux]
    - echo "if {[catch {package require -exact BWidget {{ version }}; exit 0}]} {exit 1}" | tclsh  # [osx]
    - echo if {[catch {package require -exact BWidget {{ version }}; exit 0}]} {exit 1} | tclsh  # [win]

about:
  home: https://www.tcl.tk
  license: TCL
  license_family: BSD
  license_file: src/LICENSE.txt
  summary: Simple Widgets for Tcl/Tk.
  description: |
    The BWidget Toolkit is a high-level Widget Set for Tcl/Tk built using
    native Tcl/Tk 8.x namespaces.
    The BWidgets have a professional look&feel as in other well known
    Toolkits (Tix or Incr Widgets), but the concept is radically different
    because everything is pure Tcl/Tk.  No platform dependencies, and no
    compiling required.  The code is 100% Pure Tcl/Tk.
  dev_url: https://core.tcl-lang.org/bwidget/home
  doc_url: https://tcllib.sourceforge.net/BWman

extra:
  recipe-maintainers:
    - mingwandroid
